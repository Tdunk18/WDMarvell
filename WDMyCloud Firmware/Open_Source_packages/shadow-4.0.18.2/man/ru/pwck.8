.\"     Title: pwck
.\"    Author: 
.\" Generator: DocBook XSL Stylesheets v1.70.1 <http://docbook.sf.net/>
.\"      Date: 06/24/2006
.\"    Manual: Команды управления системой
.\"    Source: Команды управления системой
.\"
.TH "pwck" "8" "06/24/2006" "Команды управления системой" "Команды управления системой"
.\" disable hyphenation
.nh
.\" disable justification (adjust text to left margin only)
.ad l
.SH "НАЗВАНИЕ"
pwck \- проверяет целостность файлов паролей
.SH "СИНТАКСИС"
.HP 5
\fBpwck\fR [\-q] [\-s] [\fIpasswd\fR\ \fIshadow\fR]
.HP 5
\fBpwck\fR [\-q] [\-r] [\fIpasswd\fR\ \fIshadow\fR]
.SH "ОПИСАНИЕ"
.PP
Программа
\fBpwck\fR
проверяет корректность системных файлов учётных записей. Проверяется формат всех записей файлов
\fI/etc/passwd\fR
и
\fI/etc/shadow\fR
и допустимость данных каждого поля. В случае обнаружения ошибок пользователю предлагается подтвердить удаление записей, восстановление которых невозможно.
.PP
Выполняются следующие проверки:
.TP 3n
\(bu
правильное количество полей
.TP 3n
\(bu
уникальность имени пользователя
.TP 3n
\(bu
допустимость идентификатора пользователя и группы
.TP 3n
\(bu
допустимость первичной группы
.TP 3n
\(bu
допустимость домашнего каталога
.TP 3n
\(bu
допустимость регистрационной оболочки
.sp
.RE
.PP
Ошибки в количестве полей и уникальности имён пользователей невосстановимы. Если запись содержит неверное число полей, пользователя попросят подтвердить удаление всей записи. Если пользователь ответит отрицательно, дальнейшая проверка выполняться не будет. При ошибке повторения имени пользователя также возникает запрос на удаление, но в случае отказа проверка будет продолжена. Обо всех остальных ошибках выводится предупреждение и пользователю предлагается запустить команду
\fBusermod\fR, чтобы исправить ошибку.
.PP
Команды, которые работают с файлом
\fI/etc/passwd\fR
не могут изменять повреждённые или дублирующиеся записи. Как раз в этом случае и нужно использовать
\fBpwck\fR
для удаления испорченной записи.
.SH "ПАРАМЕТРЫ"
.PP
Параметры команды
\fBpwck\fR:
.TP 3n
\fB\-q\fR
Сообщать только об ошибках. Предупреждения, которые не требуют от пользователя никаких действий, показаны не будут.
.TP 3n
\fB\-r\fR
Выполнять команду
\fBpwck\fR
в режиме "только чтение".
.TP 3n
\fB\-s\fR
Отсортировать все записи в файлах
\fI/etc/passwd\fR
и
\fI/etc/shadow\fR
по числовому идентификатору пользователя.
.PP
По умолчанию, команда
\fBpwck\fR
работает с файлами
\fI/etc/passwd\fR
и
\fI/etc/shadow\fR. Пользователь может указать другие файлы с помощью параметров
\fIpasswd\fR
и
\fIshadow\fR
.SH "ФАЙЛЫ"
.TP 3n
\fI/etc/group\fR
содержит информацию о группах
.TP 3n
\fI/etc/passwd\fR
содержит информацию о пользователях
.TP 3n
\fI/etc/shadow\fR
содержит защищаемую информацию о пользователях
.SH "СМОТРИТЕ ТАКЖЕ"
.PP
\fBgroup\fR(5),
\fBpasswd\fR(5),
\fBshadow\fR(5),
\fBusermod\fR(8).
.SH "ВОЗВРАЩАЕМЫЕ ЗНАЧЕНИЯ"
.PP
Команда
\fBpwck\fR
завершая работу, возвращает следующие значения:
.TP 3n
\fI0\fR
успешное выполнение
.TP 3n
\fI1\fR
ошибка в параметрах команды
.TP 3n
\fI2\fR
есть одна или более записей с недопустимыми паролями
.TP 3n
\fI3\fR
не удалось открыть файл паролей
.TP 3n
\fI4\fR
не удалось заблокировать файл паролей
.TP 3n
\fI5\fR
не удалось изменить файл паролей

