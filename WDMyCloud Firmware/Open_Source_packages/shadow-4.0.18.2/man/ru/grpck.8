.\"     Title: grpck
.\"    Author: 
.\" Generator: DocBook XSL Stylesheets v1.70.1 <http://docbook.sf.net/>
.\"      Date: 06/24/2006
.\"    Manual: Команды управления системой
.\"    Source: Команды управления системой
.\"
.TH "grpck" "8" "06/24/2006" "Команды управления системой" "Команды управления системой"
.\" disable hyphenation
.nh
.\" disable justification (adjust text to left margin only)
.ad l
.SH "НАЗВАНИЕ"
grpck \- проверяет корректность файлов групп
.SH "СИНТАКСИС"
.HP 6
\fBgrpck\fR [\-r] [\fIгруппа\fR\ \fIshadow\fR]
.SH "ОПИСАНИЕ"
.PP
Программа
\fBgrpck\fR
проверяет корректность системных файлов учётных записей. Проверяется формат всех записей файла
\fI/etc/group\fR
и допустимость данных каждого поля. В случае обнаружения ошибок пользователю предлагается подтвердить удаление записей, восстановление которых невозможно.
.PP
Выполняются следующие проверки:
.TP 3n
\(bu
правильное количество полей
.TP 3n
\(bu
уникальность имён групп
.TP 3n
\(bu
корректный список членов и администраторов
.sp
.RE
.PP
Ошибки в количестве полей и уникальности имён групп невосстановимы. Если запись содержит неверное число полей, пользователя попросят подтвердить удаление всей записи. Если пользователь ответит отрицательно, дальнейшая проверка выполняться не будет. При ошибке повторения имени группы также возникает запрос на удаление, но в случае отказа проверка будет продолжена. Обо всех остальных ошибках выводится предупреждение и пользователю предлагается запустить команду
\fBgroupmod\fR
чтобы исправить ошибку.
.PP
Команды, которые работают с файлом
\fI/etc/group\fR
не способны изменить повреждённые или дублирующиеся записи. Как раз в этом случае и нужно использовать
\fBgrpck\fR
для удаления испорченной записи.
.SH "ПАРАМЕТРЫ"
.PP
По умолчанию, команда
\fBgrpck\fR
работает с файлами
\fI/etc/group\fR
и
\fI/etc/gshadow\fR. Пользователь может указать другие файлы с помощью параметров
\fIshadow\fR. Также, пользователь может запустить команду в режиме только для чтения, указав параметр
\fB\-r\fR. Это приведёт к автоматическому ответу
\fIнет\fR
без подтверждения пользователя. Команда
\fBgrpck\fR
также может отсортировать записи в файлах
\fI/etc/group\fR
и
\fI/etc/gshadow\fR
по номеру группы.Для запуска режима сортировки укажите параметр
\fB\-s\fR. В этом режиме проверка не выполняется, производится только сортировка.
.SH "ФАЙЛЫ"
.TP 3n
\fI/etc/group\fR
содержит информацию о группах
.TP 3n
\fI/etc/gshadow\fR
содержит защищаемую информацию о группах
.TP 3n
\fI/etc/passwd\fR
содержит информацию о пользователях
.SH "СМОТРИТЕ ТАКЖЕ"
.PP
\fBgroup\fR(5),
\fBpasswd\fR(5),
\fBshadow\fR(5),
\fBgroupmod\fR(8).
.SH "ВОЗВРАЩАЕМЫЕ ЗНАЧЕНИЯ"
.PP
Команда
\fBgrpck\fR
завершая работу, возвращает следующие значения:
.TP 3n
\fI0\fR
успешное выполнение
.TP 3n
\fI1\fR
ошибка в параметрах команды
.TP 3n
\fI2\fR
есть одна или более неправильных записей групп
.TP 3n
\fI3\fR
не удалось открыть файл групп
.TP 3n
\fI4\fR
не удалось заблокировать файл групп
.TP 3n
\fI5\fR
не удалось изменить файл групп

