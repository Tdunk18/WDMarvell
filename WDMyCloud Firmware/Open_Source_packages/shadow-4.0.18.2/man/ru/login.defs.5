.\"     Title: login.defs
.\"    Author: 
.\" Generator: DocBook XSL Stylesheets v1.70.1 <http://docbook.sf.net/>
.\"      Date: 06/24/2006
.\"    Manual: Форматы файлов
.\"    Source: Форматы файлов
.\"
.TH "login.defs" "5" "06/24/2006" "Форматы файлов" "Форматы файлов"
.\" disable hyphenation
.nh
.\" disable justification (adjust text to left margin only)
.ad l
.SH "НАЗВАНИЕ"
login.defs \- содержит конфигурацию подсистемы теневых паролей
.SH "ОПИСАНИЕ"
.PP
Файл
\fI/etc/login.defs\fR
содержит настройки подсистемы теневых паролей (shadow password suite). Этот файл является обязательным. Отсутствие данного файла не повлияет на работу системы, но, вероятно, приведёт к выполнению нежелаемых операций.
.PP
Файл представляет собой обычный текстовый файл; каждая строка описывает один параметр конфигурации. Строки состоят из названия параметра и его значения, которые разделяются пробельным символом. Пустые строки и комментарии игнорируются. Комментарии начинаются со знака фунта "#", который должен быть первым непробельным символом в строке.
.PP
Значения параметров могут быть четырёх типов: строки, логические значения, числа и длинные числа. Строки состоят из любых печатных символов. Под логическими значениями подразумеваются "yes" или "no". Неопределённый логический параметр или имеющий значение, отличное от указанных выше, считается как имеющий значение "no". Числа (обычные и длинные) можно задавать в десятичной, восьмеричной (перед значением ставится "0") или шестнадцатеричной (перед значением ставится "0x") системах счисления. Максимальные значения параметра обычного и длинного числа зависят от архитектуры компьютера.
.PP
Возможны следующие параметры конфигурации:
.TP 3n
CHFN_AUTH (логический)
Если равно
\fIyes\fR, то программы
\fBchfn\fR
и
\fBchsh\fR
будут проводить аутентификацию перед тем как выполнить любые изменения, в случае если команды не запущены суперпользователем.
.TP 3n
CHFN_RESTRICT (строка)
В этом параметре указывается, какие части поля
\fIgecos\fR
из файла
\fI/etc/passwd\fR
могут изменять обычные пользователи с помощью программы
\fBchfn\fR. Строка может содержать любую комбинацию букв
\fIf\fR
,
\fIr\fR,
\fIw\fR,
\fIh\fR, для изменения полного имени пользователя, номера комнаты, рабочего и домашнего телефона соответственно. Для совместимости, значение "yes" эквивалентно "rwh" и "no" эквивалентно "frwh". Если ничего не задано, то только суперпользователь может выполнять любые изменения. Наиболее ограничительная настройка достигается снятием SUID бита с файла
\fIchfn\fR.
.PP
GID_MAX (число), GID_MIN (число)
.RS 3n
Диапазон идентификаторов групп, используемый в программах
\fBuseradd\fR
и
\fBgroupadd\fR.
.RE
.TP 3n
MAIL_DIR (строка)
Почтовый каталог. Данный параметр нужен для управления почтовым ящиком при изменении или удалении учётной записи пользователя. Если параметр не задан, то используется значение указанное при сборке.
.TP 3n
PASS_MAX_DAYS (число)
Максимальное число дней использования пароля. Если пароль старее этого числа, то будет запущена процедура смены пароля. Если значение не задано, то предполагается значение \-1 (то есть возможность ограничения не используется).
.TP 3n
PASS_MIN_DAYS (число)
Максимальное число дней между изменениями пароля. Любая смена пароля ранее заданного срока выполнена не будет. Если значение не задано, то предполагается значение \-1 (то есть возможность ограничения не используется).
.TP 3n
PASS_WARN_AGE (число)
Число дней за которое начнёт выдаваться предупреждение об устаревании пароля. Нулевое значение означает, что предупреждение выдаётся в день устаревания, при отрицательном значении предупреждение выдаваться не будет. Если значение не задано, выдача предупреждения отключается.
.PP
Параметры PASS_MAX_DAYS, PASS_MIN_DAYS и PASS_WARN_AGE используются только при создании учётной записи. Любые изменения этих параметров не влияют на уже существующие учётные записи.
.PP
UID_MAX (число), UID_MIN (число)
.RS 3n
Диапазон идентификаторов пользователей, используемый программой
\fBuseradd\fR.
.RE
.TP 3n
UMASK (число)
Задаёт начальное значение маски доступа. Если не указано, то маска доступа устанавливается в 022.
.TP 3n
USERDEL_CMD (строка)
Определяет программу, которая будет запущена при удалении пользователя. Она должна удалять любые задания at/cron/печати удаляемого пользователя (передаётся в качестве первого аргумента).
.SH "ПЕРЕКРЁСТНАЯ ССЫЛКА"
.PP
Далее показано какие программы подсистемы теневых паролей используют данные параметры.
.TP 3n
chfn
CHFN_AUTH CHFN_RESTRICT
.TP 3n
chsh
CHFN_AUTH
.TP 3n
groupadd
GID_MAX GID_MIN
.TP 3n
newusers
PASS_MAX_DAYS PASS_MIN_DAYS PASS_WARN_AGE UMASK
.TP 3n
pwconv
PASS_MAX_DAYS PASS_MIN_DAYS PASS_WARN_AGE
.TP 3n
useradd
GID_MAX GID_MIN PASS_MAX_DAYS PASS_MIN_DAYS PASS_WARN_AGE UID_MAX UID_MIN UMASK
.TP 3n
userdel
MAIL_DIR USERDEL_CMD
.TP 3n
usermod
MAIL_DIR
.SH "ОШИБКИ РЕАЛИЗАЦИИ"
.PP
Большинство функций подсистемы теневых паролей теперь реализовано через PAM. Поэтому, файл
\fI/etc/login.defs\fR
больше не используется программами:
\fBlogin\fR(1),
\fBpasswd\fR(1),
\fBsu\fR(1). Настройку данных программ следует выполнять в файлах конфигурации PAM.
.SH "СМОТРИТЕ ТАКЖЕ"
.PP
\fBlogin\fR(1),
\fBpasswd\fR(1),
\fBsu\fR(1),
\fBpasswd\fR(5),
\fBshadow\fR(5),
\fBpam\fR(8).
